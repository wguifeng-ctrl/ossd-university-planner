# OSSD University Planner - 数据更新机制指南

## 📊 当前数据更新方案

### 技术现实

**全自动实时更新面临的挑战**：

| 挑战 | 说明 |
|------|------|
| ❌ 无开放API | 安省22所大学没有统一的公开数据API |
| ❌ 网站结构差异 | 各校官网格式迥异，难以统一抓取规则 |
| ❌ JavaScript渲染 | 现代网站多用JS动态加载数据，Classic ASP无法执行 |
| ❌ CORS限制 | 前端无法直接跨域访问其他网站数据 |
| ❌ OUAC授权壁垒 | OUAC官方数据需要教育机构资质才能接入 |
| ❌ 专业差异巨大 | 工程(3.9+)vs文科(3.3+)数据统一困难 |

### 提供的解决方案

系统现在提供 **"半自动验证 + 手动更新"** 工作流：

#### 🔧 数据验证工具（data_verification.asp）

**访问**：`http://localhost/oup/data_verification.asp`

**功能**：
1. ✅ 测试各大学官网链接连通性
2. ✅ 一键打开官网进行人工核对
3. ✅ 快速跳转到数据编辑页面
4. ✅ 提供OUAC官网链接参考

**使用流程**：
```
1. 打开数据验证工具
2. 点击"测试连通性"确认官网可访问
3. 点击"打开官网"进入大学Admission页面
4. 记录最新的GPA要求、截止日期
5. 点击"编辑数据"更新本地数据库
6. 保存后刷新详情页查看更新
```

#### ✏️ 快速数据编辑（data_edit.asp）

**访问**：`http://localhost/oup/data_edit.asp?id=[大学ID]`

**可编辑字段**：
- 最低GPA (Min GPA)
- 竞争GPA (Competitive GPA)
- 申请截止日期
- ENG4U和微积分要求（复选框）
- 热门专业列表
- 更新备注（记录数据来源）

#### 🔗 官方链接导航（official_links.asp）

**访问**：`http://localhost/oup/official_links.asp`

**包含**：
- 22所大学官方网站招生页面直达链接
- OUAC申请中心链接
- OUAC 101/105通道说明
- 截止日期参考表

---

## 🔄 推荐的更新工作流

### 场景1：学校升学指导办公室维护（推荐）

**适用**：高中Guidance Office部署使用

**流程**：
1. 每学期初（建议10月/11月），升学顾问访问各校官网
2. 使用 `data_verification.asp` 快速核对关键数据
3. 对变化较大的学校，使用 `data_edit.asp` 更新数据库
4. 在更新备注中记录核实日期和来源
5. 通知学生数据已完成学期更新

**优势**：
- 专业人员核实，数据质量有保障
- 批量更新，效率较高
- 学生信任度高

### 场景2：学生众包验证（社区版）

**适用**：系统开放给学生使用，发现问题及时反馈

**流程**：
1. 学生在使用中发现某大学数据明显过时
2. 访问官网确认最新要求
3. 联系管理员（或如果权限允许，直接编辑）
4. 提交更新并附上官网截图/链接
5. 管理员审核后合并到主数据库

### 场景3：个人用户自主核实

**适用**：个人部署，自行负责数据准确性

**流程**：
1. 针对自己的目标大学，逐一访问官网核实
2. 使用 `data_edit.asp` 修正本地数据
3. 主要关注自己申请的几所学校，不必全部更新

---

## 🚀 技术增强方向（未来升级）

### 方案A：OUAC官方API接入

**可行性**：⭐⭐⭐⭐⭐（最佳）  
**难度**：需要教育机构资质申请  
**实现**：
- 联系 OUAC (https://www.ouac.on.ca) 申请数据接口
- 申请成为认证教育机构或合作伙伴
- 获得API密钥后，使用ASP创建定时任务自动拉取

### 方案B：外部爬虫服务

**可行性**：⭐⭐⭐  
**难度**：中等，需要额外服务器  
**实现**：
```
[Node.js + Puppeteer服务] ← 定时爬取各校官网
         ↓
[中间数据库/API] ← 结构化存储
         ↓
[Classic ASP读取] ← 显示到前端
```

**要求**：
- 独立服务器运行Node.js爬虫
- 维护各校网站的解析规则（易失效）
- 数据清洗和错误处理

### 方案C：RSS/News订阅监控

**可行性**：⭐⭐  
**实现**：监控大学新闻RSS，当发布录取政策变化时通知管理员  
**局限**：只能检测变更，仍需人工核实具体内容

---

## 📋 当前系统已提供的工具清单

| 工具 | 访问路径 | 用途 |
|------|---------|------|
| 数据验证工具 | `data_verification.asp` | 测试链接、批量管理入口 |
| 快速编辑 | `data_edit.asp?id=X` | 修改单所大学数据 |
| 官方链接导航 | `official_links.asp` | 直达22所大学官网 |
| 免责声明 | `disclaimer_full.asp` | 说明数据来源限制 |
| URL测试代理 | `test_url_proxy.asp` | 后端连通性测试 |

---

## ⚠️ 重要提醒

### 数据质量标准

**必须确保**：
- ✅ 数据来源于大学官网或OUAC官方
- ✅ 区分不同专业的要求差异
- ✅ 记录核实日期（方便追踪时效性）
- ✅ 注明是OUAC 101还是105通道要求

**避免**：
- ❌ 使用第三方网站（如排名网站、中介网站）的数据
- ❌ 使用过时的往年数据
- ❌ 混淆最低GPA和竞争GPA的概念

### GPA换算注意

安省高中百分制转4.0制各学校可能有细微差异，系统使用标准转换：
- 80-100% → 4.0
- 70-79% → 3.0
- 60-69% → 2.0
- ...

建议学生在核实官网时，确认该校是否使用相同的GPA算法。

---

## 📝 示例更新记录

在 `data_edit.asp` 的更新备注字段中，建议记录格式：

```
2026-01-15: 从未来学生官网核实。工程学院Min GPA提升至3.9（原3.8），
商科维持3.8。截止日期101通道仍为1/15，105通道调整为2/1。
核实人：[Guidance Counselor Name]
```

---

## 🎯 总结

**当前状态**：
- ✅ 提供半自动验证工具，简化人工核对流程
- ✅ 提供快速编辑界面，降低数据更新门槛
- ✅ 提供官方链接导航，确保数据来源可追溯
- ⚠️ 全自动实时更新在当前技术栈下不可行

**建议**：
对教育机构部署：每学期由升学顾问统一核实并更新一次即可满足需求。

对个人用户：针对自己的3-5所目标学校单独核实，无需更新全部22所。

---

**文档版本**: v1.0  
**更新日期**: 2026-02-13
